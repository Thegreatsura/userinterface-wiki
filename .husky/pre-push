branch=$(git rev-parse --abbrev-ref HEAD)

# Allow main and develop
if [[ "$branch" =~ ^(main|develop)$ ]]; then
  exit 0
fi

# Enforce conventional branch naming: type/description
if [[ ! "$branch" =~ ^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)/[a-z0-9-]+$ ]]; then
  echo "Invalid branch name: $branch"
  echo ""
  echo "Branch names must follow: type/description"
  echo "  Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
  echo "  Example: feat/add-dark-mode, fix/header-overflow"
  echo ""
  echo "See: https://www.conventionalcommits.org/en/v1.0.0/"
  exit 1
fi
